一.事务的四大特性:
   1.原子性
     每个事务是一个整体,不可分割.事务中SQL语句要么全部执行成功,要么都失败.

   2.一致性
     事务在执行前数据库的状态和执行后数据库的状态保持一致.

     经典面试题:
        a.有一个人在9:00的时候查询数据库中的某一条数据.假设查的是balance=200;
        b.数据很多很多.在9:02的时候才查到了这条数据.
        c.但是在9:01的时候另外一个人对这条数据进行了更改,改成了balance=100;
        问:这个人查询到的是100还是200?
     答:是200;在某一时刻查询的就是该时刻数据库的状态.也就是一致性.
        原理好像是有个buffer,存储旧的数值.

        
        
       
   3.隔离性
     事务与事务之间不应该相互影响.执行时保持隔离的状态.

   4.持久性
     事务执行成功之后(commit之后),对数据库的修改是持久的,就算关机.也能保存下来.

二.事务的隔离级别:
   1.事务在操作时的理想状态是:所有的事务之间保持距离,互补影响.但是因为并发操作,多个用户同时访问同一个数据.可能引发以下问题:
      1.脏读:一个事务读取了另一个事务尚未提交的数据.
      2.不可重复读:一个事务中两次读取的数据内容不一致.这是update和delete引发的问题.(要求多次读取时内容一致)  
      3.幻读:一个事务中两次读取的数据的数量不一致.这是insert引发的问题.(要求多次读取数量一致)

      事务的隔离级别都是针对于读来说明的.

   2.四种隔离级别:
          名称                隔离级别                        脏读                  不可重复读            幻读
        读未提交         read uncommitted           是                       是                        是
        读已提交         read committed               否                       是                        是
        可重复读         repeatable read               否                       否                         是
        串行化            serializable                       否                       否                         否
  
     说明:1.四种隔离状态从上到下级别依次提高.安全性越高,但是级别越高,数据库性能越低.
          2.mysql的默认隔离级别是可重复读.(有可能发生幻读的情况,不可能发生脏读和不可重复读的问题)

   3.查询隔离级别:select @@tx_isolation;
     设置隔离级别:set global transaction isolation level 级别字符串.(一般不要去改)
  
    set global transaction isolation level REPEATABLE READ;
    set global transaction isolation level  READ COMMITTED;
    set global transaction isolation level READ UNCOMMITTED;
    set global transaction isolation level SERIALIZABLE;

    注意:设置隔离级别需要通过命令行的方式才可以,并且设置后重启客户端才能看到